{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{useLocation}from'react-router-dom';import'./registrations.css';import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const RegistrationsPage=()=>{var _location$state;const[registrations,setRegistrations]=useState([]);const[error,setError]=useState('');const location=useLocation();const eventId=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.eventId;useEffect(()=>{const fetchRegistrations=async()=>{try{const response=await axios.get(`http://localhost:8080/api/registrations/event/${eventId}`);setRegistrations(response.data);}catch(error){console.error('Error fetching registrations:',error);setError('Failed to fetch registrations. Please try again later.');setRegistrations([]);}};if(eventId)fetchRegistrations();},[eventId]);const updateStatus=async(registrationId,newStatus)=>{try{await axios.patch(`http://localhost:8080/api/registrations/${registrationId}/status?status=${newStatus}`);setRegistrations(prevRegistrations=>prevRegistrations.map(registration=>registration.registrationId===registrationId?{...registration,status:newStatus}:registration));}catch(error){console.error('Error updating registration status:',error);setError('Failed to update status. Please try again.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"registrations-container\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Registrations for Event \",eventId]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"table\",{className:\"registrations-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Registration ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Athlete ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Event ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Registration Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:registrations.map(registration=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:registration.registrationId}),/*#__PURE__*/_jsx(\"td\",{children:registration.athleteId}),/*#__PURE__*/_jsx(\"td\",{children:registration.eventId}),/*#__PURE__*/_jsx(\"td\",{children:new Date(registration.registrationDate).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{className:`status-${registration.status.toLowerCase()}`,children:registration.status}),/*#__PURE__*/_jsx(\"td\",{children:registration.status==='pending'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"accept-button\",onClick:()=>updateStatus(registration.registrationId,'accepted'),children:\"Accept\"}),/*#__PURE__*/_jsx(\"button\",{className:\"reject-button\",onClick:()=>updateStatus(registration.registrationId,'rejected'),children:\"Reject\"})]})})]},registration.registrationId))})]})]});};export default RegistrationsPage;","map":{"version":3,"names":["React","useState","useEffect","axios","useLocation","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","RegistrationsPage","_location$state","registrations","setRegistrations","error","setError","location","eventId","state","fetchRegistrations","response","get","data","console","updateStatus","registrationId","newStatus","patch","prevRegistrations","map","registration","status","className","children","athleteId","Date","registrationDate","toLocaleDateString","toLowerCase","onClick"],"sources":["C:/Users/vishw/Documents/Infosys Internship Project/BATCH-1/BATCH-1_main2 - Copy/Frontend/src/components/registrations.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useLocation } from 'react-router-dom';\r\nimport './registrations.css';\r\n\r\nconst RegistrationsPage = () => {\r\n    const [registrations, setRegistrations] = useState([]);\r\n    const [error, setError] = useState('');\r\n    const location = useLocation();\r\n    const eventId = location.state?.eventId;\r\n\r\n    useEffect(() => {\r\n        const fetchRegistrations = async () => {\r\n            try {\r\n                const response = await axios.get(`http://localhost:8080/api/registrations/event/${eventId}`);\r\n                setRegistrations(response.data);\r\n            } catch (error) {\r\n                console.error('Error fetching registrations:', error);\r\n                setError('Failed to fetch registrations. Please try again later.');\r\n                setRegistrations([]);\r\n            }\r\n        };\r\n\r\n        if (eventId) fetchRegistrations();\r\n    }, [eventId]);\r\n\r\n    const updateStatus = async (registrationId, newStatus) => {\r\n        try {\r\n            await axios.patch(`http://localhost:8080/api/registrations/${registrationId}/status?status=${newStatus}`);\r\n            setRegistrations(prevRegistrations =>\r\n                prevRegistrations.map(registration =>\r\n                    registration.registrationId === registrationId\r\n                        ? { ...registration, status: newStatus }\r\n                        : registration\r\n                )\r\n            );\r\n        } catch (error) {\r\n            console.error('Error updating registration status:', error);\r\n            setError('Failed to update status. Please try again.');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"registrations-container\">\r\n            <h2>Registrations for Event {eventId}</h2>\r\n            {error && <p className=\"error-message\">{error}</p>}\r\n            <table className=\"registrations-table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Registration ID</th>\r\n                        <th>Athlete ID</th>\r\n                        <th>Event ID</th>\r\n                        <th>Registration Date</th>\r\n                        <th>Status</th>\r\n                        <th>Actions</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {registrations.map(registration => (\r\n                        <tr key={registration.registrationId}>\r\n                            <td>{registration.registrationId}</td>\r\n                            <td>{registration.athleteId}</td>\r\n                            <td>{registration.eventId}</td>\r\n                            <td>{new Date(registration.registrationDate).toLocaleDateString()}</td>\r\n                            <td className={`status-${registration.status.toLowerCase()}`}>\r\n                                {registration.status}\r\n                            </td>\r\n                            <td>\r\n                                {registration.status === 'pending' && (\r\n                                    <>\r\n                                        <button\r\n                                            className=\"accept-button\"\r\n                                            onClick={() => updateStatus(registration.registrationId, 'accepted')}\r\n                                        >\r\n                                            Accept\r\n                                        </button>\r\n                                        <button\r\n                                            className=\"reject-button\"\r\n                                            onClick={() => updateStatus(registration.registrationId, 'rejected')}\r\n                                        >\r\n                                            Reject\r\n                                        </button>\r\n                                    </>\r\n                                )}\r\n                            </td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default RegistrationsPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}