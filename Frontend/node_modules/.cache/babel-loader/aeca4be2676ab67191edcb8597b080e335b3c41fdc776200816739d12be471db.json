{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import'./news.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NewsPage=()=>{const[events,setEvents]=useState([]);const[error,setError]=useState('');const navigate=useNavigate();useEffect(()=>{const fetchEvents=async()=>{try{const response=await axios.get('http://localhost:8080/api/events');setEvents(response.data);}catch(error){console.error('Error fetching events:',error);setError('Failed to fetch events. Please try again later.');}};fetchEvents();},[]);const isEventUpcoming=eventDate=>{const currentDate=new Date();const eventDateTime=new Date(eventDate);const timeDiff=eventDateTime.getTime()-currentDate.getTime();const daysDiff=Math.ceil(timeDiff/(1000*3600*24));return daysDiff>0?daysDiff:null;};const renderNewsCard=(event,daysUntilEvent)=>{const isCompleted=daysUntilEvent===null;const newsHeading=isCompleted?`${event.title} is completed`:`${event.title} is upcoming in ${daysUntilEvent} days left`;return/*#__PURE__*/_jsxs(\"div\",{className:\"news-card\",children:[/*#__PURE__*/_jsx(\"img\",{src:event.image_url,alt:event.title,className:\"news-image\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"news-details\",children:[/*#__PURE__*/_jsx(\"h3\",{children:newsHeading}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Organizer: \",event.organizer]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Date: \",event.date]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Time: \",event.time]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Location: \",event.location]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(isCompleted?'/results':'/events'),className:isCompleted?\"view-result-btn\":\"view-event-btn\",children:isCompleted?\"View Result\":\"View Event\"})]})]},event.id);};const upcomingNews=events.filter(event=>isEventUpcoming(event.date)!==null).map(event=>renderNewsCard(event,isEventUpcoming(event.date)));const completedNews=events.filter(event=>!isEventUpcoming(event.date)).map(event=>renderNewsCard(event,null));return/*#__PURE__*/_jsxs(\"div\",{className:\"news-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"upcoming-news\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Upcoming Event News\"}),upcomingNews]}),/*#__PURE__*/_jsxs(\"div\",{className:\"completed-news\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Completed Event News\"}),completedNews]})]});};export default NewsPage;","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","NewsPage","events","setEvents","error","setError","navigate","fetchEvents","response","get","data","console","isEventUpcoming","eventDate","currentDate","Date","eventDateTime","timeDiff","getTime","daysDiff","Math","ceil","renderNewsCard","event","daysUntilEvent","isCompleted","newsHeading","title","className","children","src","image_url","alt","organizer","date","time","location","onClick","id","upcomingNews","filter","map","completedNews"],"sources":["C:/Users/vishw/Documents/Infosys Internship Project/BATCH-1/BATCH-1_main2 - Copy/Frontend/src/components/news.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './news.css';\r\n\r\nconst NewsPage = () => {\r\n    const [events, setEvents] = useState([]);\r\n    const [error, setError] = useState('');\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        const fetchEvents = async () => {\r\n            try {\r\n                const response = await axios.get('http://localhost:8080/api/events');\r\n                setEvents(response.data);\r\n            } catch (error) {\r\n                console.error('Error fetching events:', error);\r\n                setError('Failed to fetch events. Please try again later.');\r\n            }\r\n        };\r\n\r\n        fetchEvents();\r\n    }, []);\r\n\r\n    const isEventUpcoming = (eventDate) => {\r\n        const currentDate = new Date();\r\n        const eventDateTime = new Date(eventDate);\r\n        const timeDiff = eventDateTime.getTime() - currentDate.getTime();\r\n        const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));\r\n        return daysDiff > 0 ? daysDiff : null;\r\n    };\r\n\r\n    const renderNewsCard = (event, daysUntilEvent) => {\r\n        const isCompleted = daysUntilEvent === null;\r\n        const newsHeading = isCompleted\r\n            ? `${event.title} is completed`\r\n            : `${event.title} is upcoming in ${daysUntilEvent} days left`;\r\n\r\n        return (\r\n            <div key={event.id} className=\"news-card\">\r\n                <img src={event.image_url} alt={event.title} className=\"news-image\" />\r\n                <div className=\"news-details\">\r\n                    <h3>{newsHeading}</h3>\r\n                    <p>Organizer: {event.organizer}</p>\r\n                    <p>Date: {event.date}</p>\r\n                    <p>Time: {event.time}</p>\r\n                    <p>Location: {event.location}</p>\r\n                    <button \r\n                        onClick={() => navigate(isCompleted ? '/results' : '/events')}\r\n                        className={isCompleted ? \"view-result-btn\" : \"view-event-btn\"}\r\n                    >\r\n                        {isCompleted ? \"View Result\" : \"View Event\"}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const upcomingNews = events\r\n        .filter(event => isEventUpcoming(event.date) !== null)\r\n        .map(event => renderNewsCard(event, isEventUpcoming(event.date)));\r\n\r\n    const completedNews = events\r\n        .filter(event => !isEventUpcoming(event.date))\r\n        .map(event => renderNewsCard(event, null));\r\n\r\n    return (\r\n        <div className=\"news-container\">\r\n            <div className=\"upcoming-news\">\r\n                <h2>Upcoming Event News</h2>\r\n                {upcomingNews}\r\n            </div>\r\n            <div className=\"completed-news\">\r\n                <h2>Completed Event News</h2>\r\n                {completedNews}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NewsPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}